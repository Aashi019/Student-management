{% extends 'base.html' %}

{% block title %}Edit Fee Structure{% endblock %}
{% block page_title %}Edit Fee Structure{% endblock %}

{% block content %}
<div class="content animate-fade-in-up">
    <div style="max-width: 800px; margin: 0 auto;">
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Edit Fee Structure: {{ fee_structure.name }}</h2>
                <p style="margin: 0.5rem 0 0 0; color: var(--text-secondary);">
                    Modify the details of this fee structure
                </p>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div class="form-group">
                            <label class="form-label" for="name">Fee Name *</label>
                            <input type="text" id="name" name="name" class="form-control" 
                                   value="{{ fee_structure.name }}" placeholder="e.g., Tuition Fee" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="amount">Amount (â‚¨) *</label>
                            <input type="number" id="amount" name="amount" class="form-control" 
                                   value="{{ fee_structure.amount }}" placeholder="78000" min="0" step="0.01" required>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div class="form-group">
                            <label class="form-label" for="fee_type">Fee Type *</label>
                            <select id="fee_type" name="fee_type" class="form-control" required>
                                <option value="">Select fee type...</option>
                                <option value="semester" {% if fee_structure.fee_type == 'semester' %}selected{% endif %}>Semester Fee</option>
                                <option value="annual" {% if fee_structure.fee_type == 'annual' %}selected{% endif %}>Annual Fee</option>
                                <option value="monthly" {% if fee_structure.fee_type == 'monthly' %}selected{% endif %}>Monthly Fee</option>
                                <option value="one-time" {% if fee_structure.fee_type == 'one-time' %}selected{% endif %}>One-time Fee</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="faculty_id">Faculty</label>
                            <select id="faculty_id" name="faculty_id" class="form-control">
                                <option value="">All Faculties</option>
                                {% for faculty in faculties %}
                                <option value="{{ faculty.id }}" {% if fee_structure.faculty_id == faculty.id %}selected{% endif %}>
                                    {{ faculty.name }} ({{ faculty.code }})
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div class="form-group">
                            <label class="form-label" for="semester">Semester</label>
                            <select id="semester" name="semester" class="form-control">
                                <option value="">Not applicable</option>
                                <option value="1st" {% if fee_structure.semester == '1st' %}selected{% endif %}>1st Semester</option>
                                <option value="2nd" {% if fee_structure.semester == '2nd' %}selected{% endif %}>2nd Semester</option>
                                <option value="3rd" {% if fee_structure.semester == '3rd' %}selected{% endif %}>3rd Semester</option>
                                <option value="4th" {% if fee_structure.semester == '4th' %}selected{% endif %}>4th Semester</option>
                                <option value="5th" {% if fee_structure.semester == '5th' %}selected{% endif %}>5th Semester</option>
                                <option value="6th" {% if fee_structure.semester == '6th' %}selected{% endif %}>6th Semester</option>
                                <option value="7th" {% if fee_structure.semester == '7th' %}selected{% endif %}>7th Semester</option>
                                <option value="8th" {% if fee_structure.semester == '8th' %}selected{% endif %}>8th Semester</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="academic_year">Academic Year *</label>
                            <input type="text" id="academic_year" name="academic_year" class="form-control" 
                                   value="{{ fee_structure.academic_year }}" placeholder="2024-25" required>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label class="form-label" for="description">Description</label>
                        <textarea id="description" name="description" class="form-control" rows="3" 
                                  placeholder="Optional description for this fee structure">{{ fee_structure.description }}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="due_date">Due Date</label>
                        <input type="date" id="due_date" name="due_date" class="form-control" 
                               value="{{ fee_structure.due_date.strftime('%Y-%m-%d') if fee_structure.due_date else '' }}">
                        <small class="form-text">Leave empty if there's no specific due date</small>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--gray-200);">
                        <a href="{{ url_for('admin_fees') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Back to Fee Management
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Fee Structure
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
.form-group {
    margin-bottom: 1rem;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--text-primary);
}

.form-control {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--gray-300);
    border-radius: 0.375rem;
    font-size: 0.875rem;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-control:focus {
    border-color: var(--primary-color);
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-color-rgb), 0.25);
}

.form-text {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    text-decoration: none;
    border: none;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: all 0.15s ease-in-out;
}

.btn-primary {
    background-color: var(--primary-color);
    color: white;
}

.btn-primary:hover {
    background-color: var(--primary-dark);
}

.btn-secondary {
    background-color: var(--gray-600);
    color: white;
}

.btn-secondary:hover {
    background-color: var(--gray-700);
}
</style>
{% endblock %}